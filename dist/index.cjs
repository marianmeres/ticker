"use strict";const e=e=>"function"==typeof e,t=(t,n="")=>{if(!e(t))throw new TypeError(`${n} Expecting function arg`.trim())};exports.createTicker=(n=1e3)=>{const r=((n=undefined,r=null)=>{const s=t=>e(r?.persist)&&r.persist(t);let i=(()=>{const e=new Map,t=t=>(e.has(t)||e.set(t,new Set),e.get(t)),n=(e,n)=>{if("function"!=typeof n)throw new TypeError("Expecting callback function as second argument");return t(e).add(n),()=>t(e).delete(n)};return{publish:(e,n={})=>{t(e).forEach((e=>e(n)))},subscribe:n,subscribeOnce:(e,t)=>{const r=n(e,(e=>{t(e),r()}));return r},unsubscribeAll:t=>e.delete(t)}})(),o=n;s(o);const c=()=>o,u=e=>{o!==e&&(o=e,s(o),i.publish("change",o))};return{set:u,get:c,update:e=>{t(e,"[update]"),u(e(c()))},subscribe:e=>(t(e,"[subscribe]"),e(o),i.subscribe("change",e))}})(0);let s=0;if(n=parseInt(n,10),isNaN(n)||n<0)throw new Error("Invalid interval. Expecting positive non-zero number of milliseconds.");const i=()=>{r.set("undefined"!=typeof window?window.performance.now():Date.now()),s=setTimeout(i,n)},o=()=>{r.set(0),s&&(clearTimeout(s),s=0)};return{start:()=>!s&&i(),stop:o,subscribe:e=>{const t=r.subscribe(e);return()=>{o(),t()}}}};
